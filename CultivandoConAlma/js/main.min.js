let splash,iniciarsesion,recuperar,registro,inicio,ajuste,editperfil,notificacion,detallenoti,analisis,detallestat,productos,pago,secciones,botonIngresar,botonRegistrar,botonContraseña,botonRecuperar,botonRegistrarse,botonEditar,botonCerrar,botonGuardar,botonDetalleNoti,botonAtrasNoti,botonSiguienteNoti,botonDetalleStat,botonAñadir,botonCarro,botonPagar,botonsLogin,botonsAnalisis,botonsNoti,botonsInicio,botonsCompras,botonsAjuste;function crearReferencias(){splash=document.getElementById("splash"),iniciarsesion=document.getElementById("iniciarsesion"),recuperar=document.getElementById("recuperar"),registro=document.getElementById("registro"),inicio=document.getElementById("inicio"),ajuste=document.getElementById("ajuste"),editperfil=document.getElementById("editperfil"),notificacion=document.getElementById("notificacion"),detallenoti=document.getElementById("detalle-noti"),analisis=document.getElementById("analisis"),detallestat=document.getElementById("detalle-stat"),productos=document.getElementById("productos"),pago=document.getElementById("pago"),secciones=[splash,iniciarsesion,recuperar,registro,inicio,ajuste,editperfil,notificacion,detallenoti,analisis,detallestat,productos,pago],botonIngresar=document.getElementById("botonIngresar"),botonRegistrar=document.getElementById("botonRegistrar"),botonContraseña=document.getElementById("botonContraseña"),botonRecuperar=document.getElementById("botonRecuperar"),botonRegistrarse=document.getElementById("botonRegistrarse"),botonEditar=document.getElementById("botonEditar"),botonCerrar=document.getElementById("botonCerrar"),botonGuardar=document.getElementById("botonGuardar"),botonDetalleNoti=document.getElementById("botonDetalleNoti"),botonAtrasNoti=document.getElementById("botonAtrasNoti"),botonSiguienteNoti=document.getElementById("botonSiguienteNoti"),botonDetalleStat=document.getElementById("botonDetalleStat"),botonAñadir=document.getElementById("botonAñadir"),botonCarro=document.getElementById("botonCarro"),botonPagar=document.getElementById("botonPagar"),botonsLogin=document.querySelectorAll(".botonsLogin"),botonsAnalisis=document.querySelectorAll(".botonsAnalisis"),botonsNoti=document.querySelectorAll(".botonsNoti"),botonsInicio=document.querySelectorAll(".botonsInicio"),botonsCompras=document.querySelectorAll(".botonsCompras"),botonsAjuste=document.querySelectorAll(".botonsAjuste")}function crearEventos(){botonRegistrar.addEventListener("click",irRegistro),botonContraseña.addEventListener("click",irRecuperar),botonRecuperar.addEventListener("click",irIniciarSesion),botonEditar.addEventListener("click",irEditarPerfil),botonCerrar.addEventListener("click",irIniciarSesion),botonDetalleNoti.addEventListener("click",irDetalleNoti),botonDetalleStat.addEventListener("click",irDetalleStat),botonCarro.addEventListener("click",irPagos),botonPagar.addEventListener("click",irProducto);for(var e=0;e<=1;e++)botonsLogin[e].addEventListener("click",irIniciarSesion);for(e=0;e<=8;e++)botonsAnalisis[e].addEventListener("click",irAnalisis),botonsNoti[e].addEventListener("click",irNoti),botonsCompras[e].addEventListener("click",irCompras),botonsAjuste[e].addEventListener("click",irAjuste);for(e=0;e<=11;e++)botonsInicio[e].addEventListener("click",irInicio)}function ocultarSecciones(){for(i in secciones)secciones[i].classList.add("ocultar")}function irIniciarSesion(){ocultarSecciones(),iniciarsesion.classList.remove("ocultar")}function irInicio(e){null!=e&&e.preventDefault(),ocultarSecciones(),inicio.classList.remove("ocultar")}function irRegistro(e){e.preventDefault(),ocultarSecciones(),registro.classList.remove("ocultar")}function irRecuperar(e){e.preventDefault(),ocultarSecciones(),recuperar.classList.remove("ocultar")}function irEditarPerfil(e){e.preventDefault(),ocultarSecciones(),editperfil.classList.remove("ocultar")}function irAjuste(e){null!=e&&e.preventDefault(),ocultarSecciones(),ajuste.classList.remove("ocultar")}function irDetalleNoti(e){e.preventDefault(),ocultarSecciones(),detallenoti.classList.remove("ocultar")}function irDetalleStat(e){e.preventDefault(),ocultarSecciones(),detallestat.classList.remove("ocultar")}function irPagos(e){e.preventDefault(),ocultarSecciones(),pago.classList.remove("ocultar")}function irProducto(e){e.preventDefault(),ocultarSecciones(),productos.classList.remove("ocultar")}function irAnalisis(e){e.preventDefault(),ocultarSecciones(),analisis.classList.remove("ocultar")}function irNoti(e){e.preventDefault(),ocultarSecciones(),notificacion.classList.remove("ocultar")}function irCompras(e){e.preventDefault(),ocultarSecciones(),productos.classList.remove("ocultar")}var userL_txt,passwL_txt,nameR_txt,emailR_txt,userR_txt,passwR_txt,nameE_txt,emailE_txt,userE_txt,passwE_txt,confirpasswE_txt;window.onload=()=>{crearReferencias(),setTimeout(irIniciarSesion,1500),crearEventos(),initPersistencia()};var usuarios=[],current={};function initPersistencia(){usuarios=null==JSON.parse(localStorage.getItem("usuarios"))?usuarios=[]:JSON.parse(localStorage.getItem("usuarios")),initRegistro(),initLogin(),initEditar()}function initRegistro(){nameR_txt=document.getElementById("nombreR"),emailR_txt=document.getElementById("emailR"),userR_txt=document.getElementById("userR"),passwR_txt=document.getElementById("passwR"),botonRegistrarse.addEventListener("click",registrar)}function registrar(){if(""==nameR_txt.value||""==emailR_txt.value||""==userR_txt.value||""==passwR_txt.value)return alert("Debe llenar todos los campos"),!1;var e={};for(var t in e.name=nameR_txt.value,e.email=emailR_txt.value,e.user=userR_txt.value,e.passw=passwR_txt.value,e.alerts=null,e.products=null,usuarios)if(usuarios[t].user==userR_txt.value)return alert("Ya existe ese nombre de usuario"),!1;usuarios.push(e),current=e,localStorage.setItem("usuarios",JSON.stringify(usuarios)),adecuarCampos(e),irInicio()}function adecuarCampos(e){nameR_txt.value="",emailR_txt.value="",userR_txt.value="",passwR_txt.value="",userL_txt.value=e.user,passwL_txt.value="",nameE_txt.value=e.name,emailE_txt.value=e.email,userE_txt.value=e.user,passwE_txt.value=e.passw}function initLogin(){userL_txt=document.getElementById("user"),passwL_txt=document.getElementById("passw"),botonIngresar.addEventListener("click",iniciarSesion)}function iniciarSesion(){if(""==userL_txt.value||""==passwL_txt.value)return alert("Ingrese usuario y contraseña"),!1;for(var e in usuarios)if(usuarios[e].user==userL_txt.value&&usuarios[e].passw==passwL_txt.value)return current=usuarios[e],adecuarCampos(usuarios[e]),irInicio(),!0;alert("Usuario y/o contraseña incorrectos")}function initEditar(){nameE_txt=document.getElementById("nombreE"),emailE_txt=document.getElementById("emailE"),userE_txt=document.getElementById("userE"),passwE_txt=document.getElementById("passwE"),confirpasswE_txt=document.getElementById("passwconfE"),botonGuardar.addEventListener("click",editarDatos)}function editarDatos(){if(""==nameE_txt.value||""==emailE_txt.value||""==userE_txt.value||""==passwE_txt.value||""==confirpasswE_txt.value)return alert("Debe llenar todos los campos"),!1;if(passwE_txt.value!=confirpasswE_txt.value)return alert("Las contraseñas no coinciden"),!1;for(var e in current.name=nameE_txt.value,current.email=emailE_txt.value,current.user=userE_txt.value,current.passw=passwE_txt.value,usuarios)if(usuarios[e].user==current.user)return usuarios[e]=current,adecuarCampos(current),localStorage.setItem("usuarios",JSON.stringify(usuarios)),irAjuste(),!0}